# 夏普比率 (Sharpe Ratio)

夏普比率是由诺贝尔奖得主威廉·F·夏普提出的，用于衡量投资组合或策略在承受每单位风险时所获得的超额回报。它是金融领域中最常用的风险调整后收益指标之一。

## 概念与重要性

夏普比率的核心思想是，不仅仅看投资能赚多少钱（收益率），还要看为了赚这些钱承担了多大的风险（通常用收益率的波动性或标准差来衡量）。

*   **风险调整后收益**: 它提供了一个标准化的方法来比较不同投资或策略的绩效，即使它们的风险水平不同。
*   **投资决策**: 投资者可以使用夏普比率来选择那些在给定风险水平下提供更高回报，或者在给定回报水平下风险更低的投资机会。
*   **策略优化**: 对于策略开发者来说，夏普比率是评估策略好坏的重要指标，优化策略的目标之一往往是提高夏普比率。

## 计算公式

夏普比率的通用计算公式为：

\[ S_a = \frac{E[R_a - R_b]}{\sigma_a} = \frac{E[R_a - R_b]}{\sqrt{\text{var}[R_a - R_b]}} \]

其中：
*   \( R_a \) 是资产或策略的回报率。
*   \( R_b \) 是基准资产的回报率，通常是无风险利率 (Risk-Free Rate)，比如短期国债利率。
*   \( E[R_a - R_b] \) 是资产或策略的超额回报率的期望值（即平均超额回报率）。
*   \( \sigma_a \) 是资产或策略超额回报率的标准差，代表其波动性或风险。

**简化版夏普比率 (本项目中使用)**

在许多实际应用中，尤其是当无风险利率较低或难以确定时，会使用简化版的夏普比率。在我们的项目中，目前计算的是一个简化版本：

1.  **假设无风险利率为0**: 这意味着超额回报率就等于策略的实际回报率。
2.  **使用日收益率数据**: 我们基于策略的日收益率来计算。

所以，简化的计算步骤大致如下：

*   计算策略每日收益率的平均值 (Average Daily Return)。
*   计算策略每日收益率的标准差 (Standard Deviation of Daily Returns)。
*   `每日夏普比率 = 平均日收益率 / 日收益率标准差`
*   **年化夏普比率**: 为了方便比较，通常会将每日夏普比率年化。如果假设一年有252个交易日，则：
    *   `年化夏普比率 = 每日夏普比率 * \sqrt{252}`

## 如何解读

*   **越高越好**: 夏普比率越高，说明投资组合每承受一单位风险，所获得的超额回报越高。因此，在其他条件相同的情况下，夏普比率越高的策略或投资越有吸引力。
*   **一般标准 (参考)**:
    *   夏普比率 < 0: 不值得投资，因为回报率尚未超过无风险利率（或者在我们的简化版中，平均回报为负）。
    *   0 < 夏普比率 < 1: 通常被认为是表现欠佳或一般。
    *   1 < 夏普比率 < 2: 通常被认为是表现良好。
    *   夏普比率 > 2: 通常被认为是表现非常优秀。
    *   夏普比率 > 3: 通常被认为是表现极好（比较罕见）。
*   **比较的相对性**: 夏普比率更适合用于比较相似类型或目标相近的投资/策略。不同市场、不同资产类别的夏普比率可能不具有直接可比性。
*   **依赖历史数据**: 夏普比率是基于历史数据计算的，未来表现可能会有所不同。
*   **注意标准差的意义**: 如果策略的收益率标准差非常小（接近于0），夏普比率可能会变得非常大甚至无意义，这时需要谨慎分析。

在我们的程序中，`core_engine/performance_analyzer.py` 里的 `calculate_performance_metrics` 函数计算了年化的简化版夏普比率，并呈现在性能报告中。 